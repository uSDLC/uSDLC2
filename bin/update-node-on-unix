#!/bin/bash
# Copyright (C) 2012,13 Paul Marrington (paul@marrington.net), see uSDLC2/GPL for license

##################################################
# change this as new versions of node are released
##################################################
nodeVersion=v0.8.14

################################################
# Now we download the correct version of node-js
################################################
cd uSDLC2/ext

os="`uname`-`uname -m`"
case $os in
	Darwin-x86_64) os=darwin-x64 ;;
	Darwin-i386) os=darwin-x86 ;;
	Linux-x86-64) os=linux-x64 ;;
	Linux-i386) os=linux-x86 ;;
	*) echo "Unknown OS version - '$os'"
	   echo "Compile from source at 'http://nodejs.org/dist/$nodeVersion/node-$nodeVersion.tar.gz'"
	   exit
esac
fileName=node-$nodeVersion-$os

curl -OL http://nodejs.org/dist/v0.8.14/$fileName.tar.gz
tar -xzf $fileName.tar.gz
rm $fileName.tar.gz
rm -r node 2>/dev/null
mkdir node
mv $fileName/* node
rm -r $fileName
